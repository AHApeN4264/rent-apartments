{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>–ú–µ–Ω—é</title>
<link rel="icon" type="image/x-icon" href="{% static 'icons/icons8-brutus-32.ico' %}">
<link rel="stylesheet" href="{% static 'css/menu2.css' %}">
<link rel="stylesheet" href="{% static 'css/switch.css' %}">
{% endblock %}

{% block body %}
<div class="username-display">
  {% if user.username %}
    <a href="/settings" class="login-link">üë§ {{ user.username }}</a>
    <a href="/wallet" class="login-link">({{ user.wallet }})</a>
  {% else %}
    <a href="/login" class="login-link">üë§ –í–∏ –Ω–µ —É–≤—ñ–π—à–ª–∏ –≤ –∞–∫–∞—É–Ω—Ç</a>
    <a href="/login" class="login-link">–£–≤—ñ–π—Ç–∏</a>
  {% endif %}
  <div class="switch-wrapper">
    <label class="switch" title="–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É">
      <input type="checkbox" id="themeToggle" aria-label="Theme toggle">
      <span class="slider"></span>
    </label>
  </div>
</div>


<header>
  {% if is_admin %}
    <a href="/admin" class="admin-button">–ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å</a>
  {% endif %}
</header>

{% if messages %}
  {% for message in messages %}
    <p class="{% if 'success' in message.tags %}message{% elif 'error' in message.tags %}error-msg{% else %}info-msg{% endif %}">
      {{ message }}
    </p>
  {% endfor %}
{% endif %}

<div class="vertical-menu">
  {% if user.username %}
    <button onclick="location.href='/room-for-sell/{{ user.id }}'">–í–∏—Å—Ç–∞–≤–∏—Ç–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∂ –∫—ñ–º–Ω–∞—Ç—É</button>
    <button onclick="location.href='/rooms-list/{{ user.id }}'">–û–Ω–æ–≤–∏—Ç–∏ –∫—ñ–º–Ω–∞—Ç—É</button>
  {% else %}
    <button onclick="location.href='/error-continued'">–í–∏—Å—Ç–∞–≤–∏—Ç–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∂ –∫—ñ–º–Ω–∞—Ç—É</button>
    <button onclick="location.href='/error-continued'">–û–Ω–æ–≤–∏—Ç–∏ –∫—ñ–º–Ω–∞—Ç—É</button>
  {% endif %}
  <button onclick="location.href='/all-room-views'">–ö—ñ–º–Ω–∞—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∂—ñ</button>
  {% with user_id=user.id|default:"none" %}
    <button onclick="location.href='{% url "search-room" user_id %}'">–ó–∞–ø–∏—Ç–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∂ –∫—ñ–º–Ω–∞—Ç–∏</button>
  {% endwith %}
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("themeToggle");
    const html = document.documentElement;

    if (localStorage.getItem("darkTheme") === "true") {
      html.classList.add("dark-theme");
      toggle.checked = true;
    }

    toggle.addEventListener("change", function () {
      html.classList.toggle("dark-theme", this.checked);
      localStorage.setItem("darkTheme", this.checked);
    });
  });
</script>
{% endblock %}
